
machine my_ubuntu_server {
	cpus: 1
	ram: 512Mb
	iso: "/opt/ubuntu-16.04.6-server-amd64.iso"
	disk main: {
		size: 4Gb
	}
}

macro my_iterations_macro(from_where, iterations) {
	for (i IN RANGE "${iterations}") {
		print "${from_where}: iteration #${i}"
	}
}

[no_snapshots: true]
test for_range_param {
	my_ubuntu_server {
		my_iterations_macro("0", "4")
		my_iterations_macro("1", "3")
	}
}

param range_begin "3"
param range_end "5"

[no_snapshots: true]
test for_range_str_0 {
	my_ubuntu_server {
		for (i IN RANGE "${range_begin}" "${range_end}") {
			print "iteration #${i}"
		}
	}
}


[no_snapshots: true]
test for_range_token {
	my_ubuntu_server {
		for (i IN RANGE 3 5) {
			print "iteration #${i}"
		}
	}
}

flash my_flash {
	fs: "vfat"
	size: 8Mb
}

[no_snapshots: true]
test for_copyto {
	my_flash {
		for (i IN RANGE 5) {
			copyto "./000${i}.testo" "/000${i}.testo"
			copyto "./0001.testo" "/1000.testo"
		}
	}
}
