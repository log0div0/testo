include "installations.testo"

test ospf1: UB2_configure_network, router3_prepare {
	router1 {
		copyto "bird_configs/OSPF_R1.conf" "/opt/OSPF_R1.conf"
		exec bash "bird -c /opt/OSPF_R1.conf"
	}

	router3 {
		copyto "bird_configs/OSPF_R3.conf" "/opt/OSPF_R3.conf"
		exec bash "bird -c /opt/OSPF_R3.conf"
	}

	MS {
		mouse rclick "node-${UB1_id}"
		mouse click "Свойства".from_bottom(0)
		wait "безопасности - node-${UB1_id}"

		mouse click "Динамические маршруты"
		mouse move 0 0
		mouse click "Динамические маршруты".from_left(1)

		copyto "bird_configs/2_OSPF_UB1.conf" "C:\\Users\\testo\\Desktop\\2_OSPF_UB1.conf"

		mouse click "Конфигурация маршрутизации".right_center().move_right(240)
		mouse click "Рабочий стол"
		mouse click "Имя файла:".right_center().move_right(30)
		type "2_OSPF_UB1.conf"
		mouse click "Открыть".from_bottom(0)

		mouse click "Интерфейсы"
		#ge-0-0, OSPF1_side
		mouse dclick "Не определён".from_top(0)
		wait "Назначение:"
		mouse click "Не определён";
		mouse click "Внешний"
		mouse click "Разрешенные протоколы:".right_center().move_right(30)
		mouse click "OSPF"; press Space, Enter*2
		wait !"Назначение:"

		mouse dclick "Не определён".from_top(0)
		wait "Назначение:"
		mouse click "Не определён";
		mouse click "Внешний"
		mouse click "Разрешенные протоколы:".right_center().move_right(30)
		mouse click "OSPF"; press Space, Enter*2
		wait !"Назначение:"

		mouse click "OK".from_bottom(0)

		mouse click "Установить"

		wait "Установить политики"
		mouse click "ОК".from_bottom(0)

		wait "Установка политики на узлы безопасности"
		wait "Новых уведомлений нет" timeout 3m

		abort "stop here"
	}
}