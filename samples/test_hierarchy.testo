machine vpn_sgw1 {
	cpus: 1
	ram: 512Mb
	iso: $ISO_DIR + "/ubuntu-16.04.6-server-amd64.iso"
	disk_size: 4Gb
	nic nat: {
		slot: 0
		attached_to: "nat"
		adapter_type: "e1000"
	}

	nic WAN: {
		slot: 1
		attached_to: "internal"
		network: "net2"
		mac: "52:54:00:00:00:00"
		adapter_type: "e1000"
	}

	nic LAN: {
		slot: 2
		attached_to: "internal"
		network: "net1"
		mac: "52:54:00:00:00:11"
		adapter_type: "e1000"
	}

	metadata: {
		login: "vpn-sgw1"
		password: "1111"
		host_name: "vpn-sgw1"
	}
}

machine vpn_sgw2 {
	cpus: 1
	ram: 512Mb
	iso: $ISO_DIR + "/ubuntu-16.04.6-server-amd64.iso"
	disk_size: 4Gb
	nic nat: {
		slot: 0
		attached_to: "nat"
		adapter_type: "e1000"
	}

	nic WAN: {
		slot: 1
		attached_to: "internal"
		network: "net2"
		mac: "52:54:00:00:00:00"
		adapter_type: "e1000"
	}

	nic LAN: {
		slot: 2
		attached_to: "internal"
		network: "net1"
		mac: "52:54:00:00:00:11"
		adapter_type: "e1000"
	}

	metadata: {
		login: "vpn-sgw1"
		password: "1111"
		host_name: "vpn-sgw1"
	}
}

machine vpn_sgw3 {
	cpus: 1
	ram: 512Mb
	iso: $ISO_DIR + "/ubuntu-16.04.6-server-amd64.iso"
	disk_size: 4Gb
	nic nat: {
		slot: 0
		attached_to: "nat"
		adapter_type: "e1000"
	}

	nic WAN: {
		slot: 1
		attached_to: "internal"
		network: "net2"
		mac: "52:54:00:00:00:00"
		adapter_type: "e1000"
	}

	nic LAN: {
		slot: 2
		attached_to: "internal"
		network: "net1"
		mac: "52:54:00:00:00:11"
		adapter_type: "e1000"
	}

	metadata: {
		login: "vpn-sgw1"
		password: "1111"
		host_name: "vpn-sgw1"
	}
}

test node2 {
	vpn_sgw1 stop
}
test node1 {
	vpn_sgw3 stop
}
test node3 {}
test node9 {}
test node10: node9 {
}
test node11: node10 {}
test node6 {}
test node4 {}
test node5 {}
test node7: node4, node5, node6 {}
test node8: node1, node2, node3, node7 {
	vpn_sgw1 stop
	vpn_sgw3 stop
	vpn_sgw2 stop
}
test node12: node8, node11 {}

test node14 {
	vpn_sgw1 stop
}
test node13 {
	vpn_sgw3 stop
}
test node15 {}
test node21 {}
test node22: node21 {
}
test node23: node22 {}
test node18 {}
test node16 {}
test node17 {}
test node19: node16, node17, node18 {}
test node20: node13, node14, node15, node19 {
	vpn_sgw1 stop
	vpn_sgw3 stop
	vpn_sgw2 stop
}
test node24: node20, node23 {}