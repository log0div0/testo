machine my_machine1 {
	cpus: 1
	ram: 512Mb
	iso: "../iso.iso"
	disk_size: 4Gb
}

machine my_machine2 {
	cpus: 1
	ram: 512Mb
	iso: "../iso.iso"
	disk_size: 4Gb
}

machine my_machine3 {
	cpus: 1
	ram: 512Mb
	iso: "../iso.iso"
	disk_size: 4Gb
}

machine my_machine4 {
	cpus: 1
	ram: 256Mb #changed
	iso: "../iso.iso"
	disk_size: 4Gb
}

flash my_flash {
	fs: "ntfs"
	size: 16Mb
}

test branch1_parent1 {
	my_machine1 {
		print "branch1_parent1"
	}
}

test branch2_parent {
	my_machine3 {
		print "branch1_parent1"
	}
}

test branch1_parent2 {
	my_machine2 {
		print "branch1_parent1"
	}
}


test branch1_child1: branch1_parent1, branch1_parent2 {
	my_machine1 {
		print "branch1_child1"
	}
}

test branch1_child2: branch1_parent1, branch1_parent2 {
	my_machine2 {
		print "branch1_child2"
		plug flash my_flash
		unplug flash my_flash
	}
}

test branch2_child1: branch2_parent {
	my_machine4 {
		print "branch2_child1"
	}
}

test branch2_child2: branch2_child1 {
	my_machine3 {
		print "branch2_child2"
	}
}
