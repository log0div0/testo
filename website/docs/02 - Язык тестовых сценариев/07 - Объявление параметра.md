# Объявление параметра

Для объявления параметров (глобальных констант) используется директива
`param`. Формат директивы выглядит следующим образом:

```
param <name> <value>
```

- `name` - Имя параметра. Должно быть **идентификатором**.
- `value` - Значение параметра. Должно быть **строкой**.

Параметры можно объявлять с помощью аргумента командной строки
`param <param_name> <param_value>`. В этом случае к этому параметру
можно будет обращаться в любом месте тестового сценария точно так же,
как к обычному параметру, объявленному с помощью директивы `param`.

После объявления параметра к нему можно обращаться в тестовом сценарии
(главное чтобы на момент обращения параметр уже был объявлен). Подробнее
про обращение к параметрам см. [здесь](var_refs).

Будучи однажды объявленным, параметр не может менять свое значение в
дальнейшем. При попытке повторно объявить параметр, позникнет ошибка.

> Если имя параметра, переданного через аргумент командной строки,
> конфликтует с именем параметра, указанного с помощью директивы `param`,
> то возникнет соответствующая ошибка

При объявлении параметров можно использовать значения ранее объявленных
параметров.

## Пример

Предположим, что один параметр был передан с помощью командной строки
(`--param ISO_DIR /path/to/iso`)

```
param param1 "value1"  # превращается в "value1"
param param2 "${ISO_DIR}/${param1}" #превращается в "/path/to/iso/value1"
```

## Служебные параметры

Некоторые параметры выполняют служебную роль и позволяют управлять
значениями по умолчанию для таймаутов (спецификатор `timeout`) и
интервалов (спецификатор `interval`) в различных командах. Например, для
команды `wait` время ожидания по умолчанию равно одной минуте. Если
требуется изменить время ожидания по умолчанию (например, на 2 минуты),
то необходимо написать следующее

```
test tmp1 {
    my_vm wait "Hello world" #таймаут по умолчанию составит 1 минуту
}

param TESTO_WAIT_DEFAULT_TIMEOUT "2m"

...

test tmp2 {
    my_vm wait "Hello world" #таймаут по умолчанию составит 2 минуты
}
```

> Задать служебные параметры можно один раз. Повторная попытка изменить
> значение по умолчанию приведет к ошибке.

> К служебным параметрам применимы все те же правила, что и к обычным
> параметрам. Например, можно задать значение служебного параметра с
> помощью аргумента командной строки (\--param)

## Список служебных параметров

- `TESTO_WAIT_DEFAULT_TIMEOUT` - время по умолчанию для максимального
  периода ожидания в команде `wait`
- `TESTO_WAIT_DEFAULT_INTERVAL` - интервал по умолчанию для проверки
  состояния экрана в команде `wait`
- `TESTO_CHECK_DEFAULT_TIMEOUT` - время по умолчанию для максимального
  периода ожидания положительного результата в команде `check`
- `TESTO_CHECK_DEFAULT_INTERVAL` - интервал по умолчанию для проверки
  состояния экрана в команде `check`
- `TESTO_MOUSE_MOVE_CLICK_DEFAULT_TIMEOUT` - время по умолчанию для
  максимального периода ожидания в командах семейства `mouse` (там,
  где применимо ожидание)
- `TESTO_PRESS_DEFAULT_INTERVAL` - интервал по умолчанию для
  последовательности нажатий клавиш в команде `press`
- `TESTO_TYPE_DEFAULT_INTERVAL` - интервал по умолчанию для
  последовательности нажатий клавиш при наборе текста в команде `type`
- `TESTO_EXEC_DEFAULT_TIMEOUT` - время по умолчанию для максимального
  периодна ожидания в команде `exec`
- `TESTO_COPY_DEFAULT_TIMEOUT` - время по умолчанию для максимального
  периодна ожидания в командах `copyto` и `copyfrom`
