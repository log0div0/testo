# Общая концепция построения запросов на языке javascript

Поисковые выражения с ипользованием javascript позволяют выполнять
сложную обработку содержимого на экране, для которой стандартных средств
языка Testo-lang оказалось недостаточно. В настоящее время
javascript-запросы применяются в командах `wait`, `check` и семействах
команд работы с курсором мыши `mouse`. Для команд `wait` и `check`
javascript-запросы помогают определить, появилось ли на экране
какое-либо событие, а для команд `mouse` (подробности
[здесь](mouse)) помогают определить
координаты перемещения курсора.

## Основные правила составления запросов

Для составления запроса с использованием javascript необходимо указать
ключевое слово `js` и затем написать js-скрипт в виде однострочной или
многострочной строки. Внутри js-скрипта можно использовать встроенные
функции и объекты специальных классов, список которых можно найти дальше
в этой документации. Эти функции и объекты помогут Вам проанализировать
то, что происходит на экране а данный момент времени.

Javascript-запрос должен возвращать некоторое значение. Формат
возвращаемого значения зависит от команды, в которой применяется
javascript-запрос. Для команд `wait` и `check` должно возвращаться
значение `true` или `false`. Для команд `mouse` необходимо вернуть
объект, обладающий полями `x` и `y`.

В ходе выполнения команды `wait`, `check` и `mouse` делают скриншоты
содержимого экрана в течение некоторого времени (зависит от
спецификатора `timeout`). Javascript-запрос будет выполняться отдельно
для каждого такого скриншота.

> Если js-скрипт оформлен в однострочной строке, то необходимо
> экранировать двойные кавычки, использующиеся внутри самого скрипта (см.
> пример ниже).
> Если же js-скрипт оформлен с использованием многострочных строк, то
> экранировать двойные кавычки не нужно.
