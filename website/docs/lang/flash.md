---
id: flash
title: Объявление виртуального флеш-накопителя
---

Для объявления виртуальных флеш-накопителей используется директива
`flash`. Формат директивы выглядит следующим образом:

	flash <name> {
	    <attr1: <value1>
	    <attr2: <value1>
	    <attr3: <value1>
	    ...
	}

> Объявление виртуального флеш-накопителя само по себе не ведет к его
> созданию. Реальное создание произойдет при запуске теста, в котором
> учавствует этот флеш-накопитель.

Витруальные флеш-накопители могут использоваться в командах
`(un)plug flash` для того, чтобы организовать передачу данных между
машинами, имитируя реальные флеш-накопители, которые могут использовать
люди.

Виртуальный флеш-накопитель, как и виртуальная машина, требует наличия
уникального среди флеш-накопителей имени `name`.

Объявление виртуальных флеш-накопителей во многом схоже с
[объявлением виртуальных машин](machine),
но список атрибутов здесь другой:

- `fs` - тип файловой системы, которая будет использоваться в
  флеш-накопителе. В настоящий момент поддерживается только значения
  `"ntfs"` и `"vfat"`
- `size` - размер флешки. Значение атрибута должно быть
  **спецификатором количества памяти**.
- `folder` - путь к папке в хостовой машине, которую необходимо
  скопировать на флешку при ее создании. Необязательный атрибут.
  Значение атрибута должно быть **строкой**.

Ниже представлен пример объявления флеш-накопителя:

```
flash example_flash {
    fs: "ntfs"
    size: 32Mb
    folder: "./some_folder"
}
```

## Кешируемость виртуальных флеш-накопителей

В платформе Testo предусмотрен механизм определения актуальности
конфигурации флеш-накопителей. Если с момента последнего запуска
конфигурация флеш-накопителя существенно изменилась, то флеш-накопитель
необходимо пересоздать, а все тесты, в которых он участвует - прогнать
заново. Это одна из проверок, которая определяет
[актуальность кеша теста](test#проверка-кеша).

Ниже приведен список вопросов, которые платформа Testo считает
существенными при определении закешированности конфигурации виртуального
флеш-накопителя:

- Изменились ли значения атрибутов `fs`, `size`?
- Изменилось ли содержимое папки, указанной в атрибуте `folder`?

Если ответ хотя бы на один из этих вопросов - положительный, то кеш
считается неактуальным и флеш-накопитель необходимо создать заново.
