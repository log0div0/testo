# Циклы

Язык Testo поддерживает использование циклов. Формат циклов выглядит
следующим образом:

	for (<counter> IN <range>) {
		action1
		action2
		action3
		...
	} [else {
		action1
		action2
		...
	}]

## Заголовок цикла

В заголовке цикла необходимо объявить переменную `<counter>`, которая
будет использоваться как счетчик. Количество итераций цикла можно
указать с помощью диапазона `<range>`. Диапазон можно задать следующими
способами:

1.  `RANGE <start> <finish>`, где в качестве `start` и `finish`
    используются **строки**. В строках должны быть указаны
    неотрицательные целые числа (причем значение в строке `finish`
    должно быть **больше** значения в строке `start`). При
    использовании такой конструкции счетчик `counter` в ходе
    выполнения цикла будет принимать последовательные целочисленные
    значения, начиная от `start` (включительно) и заканчивая
    `finish - 1`
2.  `RANGE <finish>`. Можно рассматривать как частный случай
    предыдущего варианта использования, в котором в качестве `start`
    используется значение по умолчанию `"0"`

Примеры диапазонов:

	RANGE "5" "10" #Счетчик примет значения 5, 6, 7, 8, 9
	RANGE "5" #Счетчик примет значения 0, 1, 2, 3, 4
	RANGE "${max_iterations}" # Счетчик примет значения в зависимости от параметра (или аргумента макроса) max_iterations

## Тело цикла

Внутри цикла можно использовать все те конструкции, которые можно
указывать в теле команд, из которых состоит тест: действия, условия,
циклы, вызов макросов. Внутри цикла дополнительно можно использовать
действия управления циклом: `continue` (переход к следующей итерации) и
`break` (выход из цикла).

Для цикла можно указать необязательную секцию `else`. Управление
переходит в эту секцию в том случае, если тело цикла `for` успешно
отработало (т.е. за время работы цикла не был вызыван `break`)

Внутри цикла можно обратиться к переменной-счетчику, как к обычному
параметру.

Пример:

```
test some_test {
	some_vm {
		for (i IN RANGE "5" "100") {
			if ("${i}" EQUAL "10") {
				continue
			}
			print "${i}"
			if ("${i}" EQUAL "20") {
				break
			}
		} else {
			print "All the cycles worked without a break"
		}
	}
}
```

Заметим, что в этом случае к блоку `else` управление никогда не
перейдет, т.к. на пятнадцатой итерации обязательно сработает `break`
