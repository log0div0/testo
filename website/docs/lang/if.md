# Условия

Язык Testo поддерживает использование условий. Формат условий выглядит
следующим образом:

```text
if (expression) {
	action1
	action2
	action3
	...
} [else {
	action1
	action2
	...
}]
```

Формат условий `if` достаточно традиционен: конструкция состоит из
оценки выражения `expression`, которое может принимать значения `true`
или `false`, в зависимости от чего будут либо выполнены действия,
перечисленные в блоке `if` (если `expression` равен `true`), либо в
блоке `else` (при его наличии).

Внутри секций `if` и `else` можно использовать все те конструкции,
которые можно указывать в теле команд, из которых состоит тест:
действия, условия, циклы, вызов макросов.

Условия можно комбинировать в каскадные конструкции:

```text
if (expression) {

} else if {

} else if {

}
...
```

## Выражения

Выражения - это вычисляемые сущности, которые могут принимать значения
либо `true`, либо `false`. Выражения в настоящий момент используются
только в конструкции `if`.

Ниже представлены варианты выражений в языке:

- Строка. Пустая строка преобразуется в значение `false`, а любая
  строка ненулевой длины - в `true`
- Отрицание выражения. Имеет формат `NOT <expr>`. Делает логическое
  инвертирование значения, полученного при вычислении `expr`
- Сравнения. Разобрано ниже.
- Логическое "И" двух выражений. Имеет формат `<expr> AND <expr>`.
  Возвращает `true`, когда оба выражения равны `true` и `false` в
  противном случае.
- Логическое "ИЛИ" двух выражений. Имеет формат
  `<expr> OR <expr>`. Возвращает `true`, когда хотя бы одно из
  выражений равно `true` и `false` в противном случае.
- Проверка наличия на экране определенного выражения
  `check <select_expr> [timeout timeout_spec] [interval interval_spec]`.
  В случае отсутствия спецификации `timeout` Возвращает `true`, если
  на экране виртуальной машины присуствует указаное выражение
  (механизм формирования выражения см. в документации команды
  `wait`). В случае наличия спецификации `timeout` проверка будет
  выполняться в течение указанного времени вплоть до первого
  успешного нахождения выражения. Если в течение заданного периода
  выражение так и не было найдено, то вернется `false`. С помощью
  спецификатора `interval` можно регулировать частоту проверок
  состояния экрана.

При необходимости упорядочить порядок вычисления выражений можно
использовать скобки.

### Сравнения

В выражениях языка Testo можно сравнивать строки между собой. Результат
сравнения - логическое значение `true` или `false`.

Существуют следующие виды сравнений:

- `STREQUAL` - сравнение двух строк на равенство
- `STRLESS` - возвращает `true`, если левая строка лексикографически
  меньше правой
- `STRGREATER` - возвращает `true`, если левая строка
  лексикографически больше правой
- `EQUAL` - Применимо, если оба операнда можно преобразовать к
  числу. Возвращает `true`, если после преобразования к числам оба
  операнда будут равны
- `LESS` - Применимо, если оба операнда можно преобразовать к числу.
  Возвращает `true`, если после преобразования к числам левый
  операнд меньше правого
- `GREATER` - Применимо, если оба операнда можно преобразовать к
  числу. Возвращает `true`, если после преобразования к числам левый
  операнд больше правого

### Примеры

```testo
"SOME STRING" # true
"" # false
"${some_var}" # значение зависит от того, определена ли переменная
check "Hello world" # true, если на экране присутствует надпись Hello world
"5" EQUAL "${some_var}" # true, если "${some_var}" принимает значение "5"
"ABC" STRLESS "BCD" # true
NOT ("ABC" STRLESS "BCD") # false
NOT ("ABC" STRLESS "BCD") OR "5" EQUAL "5" # true
NOT ("ABC" STRLESS "BCD" AND "5" EQUAL "5") # false
```
